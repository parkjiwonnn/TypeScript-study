# 12장 타입스크립트 프로젝트관리

## 12.1 앰비언트 타입 활용하기

### (1) 앰비언트 타입 선언

- 앰비언트 타입 선언
  - .d.ts 확장자를 가진 파일에서는 타입 선언만 할 수 있으며 값을 표현할 수는 없음
  - 값을 포함하는 일반적인 선언과 구별하기 위해 .d.ts 확장자를 가진 파일에서 하는 타입 선언을 엠비언트 타입 선언이라고 부름
  - 앰비언트 타입 선언으로 값을 정의할 수는 없지만 declare라는 키워드를 사용하여 어딘가에 자바스크립트 값이 존재한다는 사실을 선언할 수 있음
  - declare: 타입스크립트 컴파일러에 어떤 것의 존재 여부를 명시해주는 역할, 단순히 존재 여부만 알려주기 때문에 컴파일 대상이 아님
- 대표적인 앰비언트 타입 선언 활용 사례
  - _.js 또는 _.ts 형식이 아닌 파일을 임포트할 때 종종 에러가 발생
  - 타입스크립트는 기본적으로 .ts와 .js 파일만 이해하며 그 외의 다른 파일 형식은 인지하지 못함
  - 알지 못하는 파일 형식을 모듈로 가져오려고 하면 에러 발생
  - declare 키워드를 사용하여 특정 형식을 모듈로 선언하면 타입스크립트 컴파일러에 미리 정보를 제공함으로써 에러를 수정할 수 있게 됨
  ```jsx
  declare module "*.png" {
  	const src: string;
  	export default src;
  }
  ```
- 자바스크립트로 작성된 라이브러리
  - 자바스크립트로 구현된 라이브러리는 타입 선언이 존재하지 않음
  - 타입스크립트에서 해당 라이브러리를 사용할 수는 있지만 타입 선언이 없으므로 임포트한 모듈은 모두 any로 추론됨
  - tsconfig.json 파일에서 any를 사용하지 못하게 설정했다면 프로젝트가 빌드되지 않음
  - 자바스크립트 라이브러리 내부 함수와 변수의 타입을 앰비언트 타입으로 선언하면 타입스크립트는 자동으로 .d.ts 확장자를 가진 파일을 검색하여 타입 검사를 진행하게 되므로 문제없이 컴파일됨
  - 앰비언트 타입 선언은 타입스크립트에게 자바스크립트 코드 안에 어떤 정보가 있는지 알려주는 도구
- 타입스크립트로 작성된 라이브러리
  - 타입스크립트로 작성된 라이브러리도 자바스크립트 파일과 .d.ts 파일로 배포되는 것이 일반적
  - 자바스크립트 파일과 .d.ts 파일로 배포하면 라이브러리 코드를 따로 컴파일하지 않아도 되기 때문에 컴파일 시간이 크게 줄어듦
  - .d.ts 파일이 있기 때문에 사용자는 .d.ts 파일에 정의된 타입 정보를 활용하여 라이브러리를 사용할 수 있음
  - tsconfig.json 파일의 declaration을 true로 설정하면 타입스크립트 컴파일러는 자동으로 .d.ts 파일을 생성함
- 자바스크립트 어딘가에 전역 변수가 정의되어 있음을 타입스크립트에 알릴 때
  - 타입스크립로 직접 구현하지 않았지만 실제 자바스크립트 어딘가에 전역 변수가 정의되어 있는 상황을 타입스크립트에 알릴 때 앰비언트 타입 선언을 사용
  - 네이티브 앱에서 Window 전역 개체에 deviceId나 appVersion 같은 값을 할당해주는 시나리오가 있다고 가정할 때, Window 객체의 속성은 타입스크립트로 직접 정의한 값이 아니기 때문에 타입스크립트는 해당 속성이 Window 객체의 타입이 존재하지 않는다고 판단
  - global namespace에 있는 Window 객체에 해당 속성이 정의되어 있다는 것을 나타내기 위해 앰비언트 타입 선언 활용 가능
  ```jsx
  declare global {
  	interface Window {
  		deviceId: string | undefined;
  		appVersion: string;
  	}
  }
  ```
